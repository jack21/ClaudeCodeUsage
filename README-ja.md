# Claude Code 使用量モニター

🌐 **Language | 語言 | 言語 | 언어**: [🏠 Main](README.md) | [English](README-en.md) | [繁體中文](README-zh-TW.md) | [简体中文](README-zh-CN.md) | **日本語** | [한국어](README-ko.md)

---

Claude Code の使用量とコストを詳細な分析とインタラクティブな視覚化で監視する包括的な VSCode 拡張機能です。

## 🖼️ スクリーンショット

### ステータスバー

![ステータスバープレビュー](https://raw.githubusercontent.com/jack21/ClaudeCodeUsage/refs/heads/main/images/status-bar-preview.jpg)

### ダッシュボード

![ダッシュボードプレビュー](https://raw.githubusercontent.com/jack21/ClaudeCodeUsage/refs/heads/main/images/dashboard-preview.jpg)

## ✨ 機能

### 📊 リアルタイム監視

- **ステータスバー表示**：VSCode ステータスバーに今日の使用コストを表示
- **ライブ更新**：設定可能な間隔（最小30秒）での自動データ更新
- **依存関係ゼロ**：ネイティブ Node.js モジュールを使用し、最大の互換性を実現

### 📈 インタラクティブ分析ダッシュボード

- **複数の時間ビュー**：今日、今月、すべての時間の視点
- **インタラクティブチャート**：6つの異なる指標を切り替え可能な棒グラフ：
  - コスト分析
  - 入力/出力トークン
  - キャッシュ作成/読み取りトークン
  - メッセージ数
- **時間別分析**：今日および特定の日付の詳細な時間別使用量分析
- **展開可能な月次データ**：「すべての時間」で任意の月をクリックして日別内訳を表示
- **詳細テーブル**：ドリルダウン機能付きの包括的な日次/月次使用量の内訳
- **モデル分析**：モデル別のコストとトークン消費の追跡

![ダッシュボードプレビュー](images/dashboard-preview.png)

### 🌐 多言語サポート

- **5言語**：English, 繁體中文, 简体中文, 日本語, 한국어
- **自動検出**：システム言語を自動検出
- **手動オーバーライド**：設定で好みの言語を選択

### 🎨 視覚機能

- **ボトムアップチャート**：業界標準のチャート方向
- **月次トレンド**：すべての時間ビューで月次集計データを表示し、長期トレンド分析に対応
- **VSCode テーマ統合**：ライト/ダークテーマとのシームレスな統合
- **レスポンシブデザイン**：異なる画面サイズに最適化

## インストール

1. VSCode マーケットプレイスから拡張機能をインストール
2. 拡張機能が Claude Code データディレクトリを自動検出
3. Claude Code の使用を開始すると、使用量がステータスバーに表示されます

## 設定

`ファイル > 基本設定 > 設定` から「Claude Code Usage」を検索してアクセス：

- **更新間隔**：使用データを更新する頻度（最小 30 秒）
- **データディレクトリ**：カスタム Claude データディレクトリパス（空欄で自動検出）
- **言語**：表示言語の設定
- **小数点以下の桁数**：コスト表示の小数点以下桁数

## 🚀 使用方法

### ステータスバー

- パルスアイコン付きで**今日の使用コスト**を表示
- クリックして詳細な分析ダッシュボードを開く

### 分析ダッシュボード

1. **時間タブ**：今日、今月、すべての時間ビュー間を切り替え
2. **チャート指標**：チャート上のタブをクリックして異なる指標を切り替え：
   - コスト分析
   - 入力/出力トークン
   - キャッシュ作成/読み取りトークン
   - メッセージ数
3. **時間別分析**：「今日」タブで時間別の使用パターンを表示
4. **展開可能データ**：
   - 「今月」の日別エントリをクリックして時間別内訳を表示
   - 「すべての時間」の月別エントリをクリックして日別内訳を表示
5. **インタラクティブテーブル**：チャート下の詳細な日別/月別内訳
6. **モデル分析**：各タブのモデル別使用統計

![使用フロー](images/usage-flow.png)

## 📋 要件

- **Claude Code**：インストールされ、実行されている必要があります
- **VSCode**：バージョン 1.74.0 以降
- **Node.js**：組み込みモジュールのみ（外部依存関係なし）

## 🛠️ トラブルシューティング

### 「Claude Code データなし」エラー

1. Claude Code がインストールされ、使用されていることを確認
2. 拡張機能設定でデータディレクトリ設定を確認
3. Claude Code が `~/.claude/projects` または `~/.config/claude/projects` で使用ログを生成していることを確認

### チャートが更新されない

1. 別のタブに切り替えてから戻ってチャートを更新
2. その時期に実際の使用データがあるか確認
3. Claude 使用記録にキャッシュトークンがあるか確認

### パフォーマンスの問題

- 速度低下が発生した場合は更新間隔を増やしてください
- 拡張機能はファイル I/O を最小限に抑えるため1分間のキャッシュを使用しています

## 📝 更新履歴

### v1.0.6 (2025-08-10)
- 🆕 Claude Opus 4.1 モデルの価格設定サポートを追加
- 🔄 `claude-opus-4-1-20250805` と `claude-opus-4-1` モデルIDを含む価格データを更新
- 📊 価格は Opus 4 と同じ（入力$15/1Mトークン、出力$75/1Mトークン）

### v1.0.5 (2025-01)
- ⏰ 時間別使用量統計と可視化を追加
- 📈 時間別詳細機能でダッシュボードを強化
- 🔧 時間別集計のデータ処理を改善

### v1.0.4 (2025-01)
- 📊 全期間データ計算機能を追加
- 🎨 全期間使用データをチャートとラベルで表示するUIを更新
- 🔄 新しいデータ構造をサポートするためのデータ更新ロジックを修正
- 🌐 多言語サポートに「全期間」の翻訳を追加

### v1.0.3 (2025-01)
- 🔗 GitHub リポジトリ URL を更新
- 🖼️ READMEの画像リンクを新しいリポジトリ位置に修正
- 📦 バージョンアップとリポジトリ移行

### v1.0.0 (2025-01)
- 🎉 初回完全リリース版
- 📊 ステータスバーでのリアルタイム Claude Code 使用量監視
- 🌐 多言語サポート（English, 繁體中文, 简体中文, 日本語, 한국어）
- 📈 チャートとテーブルを含むインタラクティブな分析ダッシュボード
- 🎨 VSCode テーマ統合とレスポンシブデザイン
- ⚙️ 設定可能な更新間隔と設定

## ライセンス

MIT

## 貢献

GitHub リポジトリで Issue や Pull Request を歓迎します。